<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <script src="../bower_components/webcomponentsjs/webcomponents.min.js"></script>
    <script src="../bower_components/web-component-tester/browser.js"></script>
    <script src="../bower_components/sockjs/sockjs.js"></script>
    <script src="../bower_components/vertxbus/vertxbus.js"></script>
    <link rel="import" href="../bower_components/polymer/polymer.html">
    <link rel="import" href="../vertx-eventbus.html">
</head>
<body>
<vertx-eventbus id="eventBus"
                url="http://localhost:8090"
                pingIntervalSeconds="20"
                reconnectIntervalSeconds="10">
</vertx-eventbus>
<script>

    var eventBus = document.querySelector('#eventBus');
    eventBus.registerHandlers = [
      { address: 'address1', handler: function(data) {
        console.log('register1 handler to address1');
      }},
      { address: 'address2', handler: function(data) {
        console.log('register2 handler to address2');
      }}
    ];

    suite('<vertx-eventbus>', function() {

      test('should have url attribute', function() {
        expect(eventBus.url).to.equal('http://localhost:8090');
      });

      test('should have pingIntervalSeconds attribute if provided', function() {
        expect(eventBus.pingIntervalSeconds).to.equal('20');
      });

      test('should have reconnectIntervalSeconds attribute if provided', function() {
        expect(eventBus.reconnectIntervalSeconds).to.equal('10');
      });

      test('should have registerHandlers attribute if provided', function() {
        expect(eventBus.registerHandlers).to.have.length(2);
      });
    });
</script>
</body>
</html>